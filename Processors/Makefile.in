include ../buildTools/config.mk

SHLIB = libORProcessors.$(SOSUFFIX)
    
SOURCES = $(wildcard OR*.cc)
HEADERS = $(wildcard OR*.hh)
OBJECTS = $(SOURCES:.cc=.o)

ORFLAGS = -I../Util -I../Decoders -I../IO
ORLIBS = -L../lib -lORUtil -lORDecoders -lORIO

all: depend $(SHLIB)

.depend depend:
	@echo Checking dependencies...
	@g++ -M $(ORROOT_HAS_FFTW) $(CXXFLAGS) ${ROOTFLAGS} $(ORFLAGS) *.cc > .depend

$(SHLIB): $(OBJECTS) 
	$(SOMAKER) $(SOFLAGS) -o $(SHLIB) $(OBJECTS) $(ORLIBS) $(ROOTLIBS)

.cc.o: 
	$(CXX) $(CXXFLAGS) $(ORROOT_HAS_FFTW) $(ROOTFLAGS) $(ORFLAGS) -c $<

clean:
	rm -f $(SHLIB) *.o *~ .depend

ifneq ($(MAKECMDGOALS), clean)
-include .depend
endif
